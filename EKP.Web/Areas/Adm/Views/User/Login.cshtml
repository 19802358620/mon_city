@{
    Layout = null;
}
<!DOCTYPE html>
<!--
Template Name: Metronic - Responsive Admin Dashboard Template build with Twitter Bootstrap 3.3.2
Version: 3.3.0
Author: KeenThemes
Website: http://www.keenthemes.com/
Contact: support@keenthemes.com
Follow: www.twitter.com/keenthemes
Like: www.facebook.com/keenthemes
Purchase: http://themeforest.net/item/metronic-responsive-admin-dashboard-template/4021469?ref=keenthemes
License: You must have a valid license purchased only from themeforest(the above link) in order to legally use the theme for your project.
-->
<!--[if IE 8]> <html lang="en" class="ie8 no-js"> <![endif]-->
<!--[if IE 9]> <html lang="en" class="ie9 no-js"> <![endif]-->
<!--[if !IE]><!-->
<html lang="en">
<!--<![endif]-->
<!-- BEGIN HEAD -->
<head>
    <meta charset="utf-8" />
    <title></title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <meta http-equiv="Content-type" content="text/html; charset=utf-8">
    <meta content="" name="description" />
    <meta content="" name="author" />
    <!-- BEGIN GLOBAL MANDATORY STYLES -->
    <link href="~/Areas/Base/Scripts/Metronicv/assets/global/plugins/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css" />
    <link href="~/Areas/Base/Scripts/Metronicv/assets/global/plugins/simple-line-icons/simple-line-icons.min.css" rel="stylesheet" type="text/css" />
    <link href="~/Areas/Base/Scripts/Metronicv/assets/global/plugins/bootstrap/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
    <link href="~/Areas/Base/Scripts/Metronicv/assets/global/plugins/uniform/css/uniform.default.css" rel="stylesheet" type="text/css" />
    <!-- END GLOBAL MANDATORY STYLES -->
    <!-- BEGIN PAGE LEVEL STYLES -->
    <link href="~/Areas/Base/Scripts/Metronicv/assets/admin/pages/css/login.css" rel="stylesheet" type="text/css" />
    <!-- END PAGE LEVEL SCRIPTS -->
    <!-- BEGIN THEME STYLES -->
    <link href="~/Areas/Base/Scripts/Metronicv/assets/global/css/components-rounded.css" id="style_components" rel="stylesheet" type="text/css" />
    <link href="~/Areas/Base/Scripts/Metronicv/assets/global/css/plugins.css" rel="stylesheet" type="text/css" />
    <link href="~/Areas/Base/Scripts/Metronicv/assets/admin/layout/css/layout.css" rel="stylesheet" type="text/css" />
    <link href="~/Areas/Base/Scripts/Metronicv/assets/admin/layout/css/themes/default.css" rel="stylesheet" type="text/css" id="style_color" />
    <link href="~/Areas/Base/Scripts/Metronicv/assets/admin/layout/css/custom.css" rel="stylesheet" type="text/css" />
    <!-- END THEME STYLES -->
    <link rel="shortcut icon" href="favicon.ico" />
</head>
<!-- END HEAD -->
<!-- BEGIN BODY -->
<body class="login">
    <!-- BEGIN SIDEBAR TOGGLER BUTTON -->
    <div class="menu-toggler sidebar-toggler">
    </div>
    <!-- END SIDEBAR TOGGLER BUTTON -->
    <!-- BEGIN LOGO -->
    <div class="logo" id="logoBox">
        <a href="javascript:;">
            <img src="{Logo}"  />
        </a>
    </div>
    <!-- END LOGO -->
    <!-- BEGIN LOGIN -->
    <div class="content">
        <!-- BEGIN LOGIN FORM -->
        <h3 class="form-title">登 录</h3>
        <div class="alert alert-danger display-hide">
            <button class="close" data-close="alert"></button>
            <span>
                Enter any username and password.
            </span>
        </div>
        <div class="form-group">
            <!--ie8, ie9 does not support html5 placeholder, so we just show field title for that-->
            <label class="control-label visible-ie8 visible-ie9">用户名</label>
            <input class="form-control form-control-solid placeholder-no-fix" type="text" autocomplete="off" placeholder="用户名" name="login.username" />
        </div>
        <div class="form-group">
            <label class="control-label visible-ie8 visible-ie9">密码</label>
            <input class="form-control form-control-solid placeholder-no-fix" type="password" autocomplete="off" placeholder="密码" name="login.password" />
        </div>
        <div class="form-actions">
            <button type="submit" class="btn btn-success uppercase" onclick="login()">登录</button>
            @*<label class="rememberme check">
                <input type="checkbox" name="remember" value="1" />Remember
            </label>
            <a href="javascript:;" id="forget-password" class="forget-password">忘记密码?</a>*@
        </div>
        <div class="create-account">
            <p>
                <small class="help-block" id="login-form-error" data-fv-validator="notEmpty" data-fv-for="login.password" data-fv-result="INVALID" style="color:#f73c3c"></small>
            </p>
        </div>
        <!-- END LOGIN FORM -->
        <!-- BEGIN FORGOT PASSWORD FORM -->
        <form class="forget-form" action="index.html" method="post">
            <h3>Forget Password ?</h3>
            <p>
                Enter your e-mail address below to reset your password.
            </p>
            <div class="form-group">
                <input class="form-control placeholder-no-fix" type="text" autocomplete="off" placeholder="Email" name="email" />
            </div>
            <div class="form-actions">
                <button type="button" id="back-btn" class="btn btn-default">Back</button>
                <button type="submit" class="btn btn-success uppercase pull-right">Submit</button>
            </div>
        </form>
        <!-- END FORGOT PASSWORD FORM -->
    </div>
    <div class="copyright" id="copyrightBox">
        版权所有 {Copyright}
    </div>
    <!-- END LOGIN -->
    <!-- BEGIN JAVASCRIPTS(Load javascripts at bottom, this will reduce page load time) -->
    <!-- BEGIN CORE PLUGINS -->
    <!--[if lt IE 9]>
    <script src="~/Areas/Base/Scripts/Metronicv/assets/global/plugins/respond.min.js"></script>
    <script src="~/Areas/Base/Scripts/Metronicv/assets/global/plugins/excanvas.min.js"></script>
    <![endif]-->
    <script src="~/Areas/Base/Scripts/Metronicv/assets/global/plugins/jquery.min.js" type="text/javascript"></script>
    <script src="~/Areas/Base/Scripts/api.js"></script>
    <script src="~/Areas/Base/Scripts/Metronicv/assets/global/plugins/jquery-migrate.min.js" type="text/javascript"></script>
    <script src="~/Areas/Base/Scripts/Metronicv/assets/global/plugins/bootstrap/js/bootstrap.min.js" type="text/javascript"></script>
    <script src="~/Areas/Base/Scripts/Metronicv/assets/global/plugins/jquery.blockui.min.js" type="text/javascript"></script>
    <script src="~/Areas/Base/Scripts/Metronicv/assets/global/plugins/uniform/jquery.uniform.min.js" type="text/javascript"></script>
    <script src="~/Areas/Base/Scripts/Metronicv/assets/global/plugins/jquery.cokie.min.js" type="text/javascript"></script>
    <!-- END CORE PLUGINS -->
    <!-- BEGIN PAGE LEVEL PLUGINS -->
    <script src="~/Areas/Base/Scripts/Metronicv/assets/global/plugins/jquery-validation/js/jquery.validate.min.js" type="text/javascript"></script>
    <!-- END PAGE LEVEL PLUGINS -->
    <!-- BEGIN PAGE LEVEL SCRIPTS -->
    <script src="~/Areas/Base/Scripts/Metronicv/assets/global/scripts/metronic.js" type="text/javascript"></script>
    <script src="~/Areas/Base/Scripts/Metronicv/assets/admin/layout/scripts/layout.js" type="text/javascript"></script>
    <script src="~/Areas/Base/Scripts/Metronicv/assets/admin/layout/scripts/demo.js" type="text/javascript"></script>
    <script src="~/Areas/Base/Scripts/Metronicv/assets/admin/pages/scripts/login.js" type="text/javascript"></script>
    <!-- END PAGE LEVEL SCRIPTS -->
    <script src="~/Areas/Base/Scripts/layer/layer.js"></script>
    <script src="~/Areas/Base/Scripts/formvalidation/dist/js/formValidation.js"></script>
    <script src="~/Areas/Base/Scripts/formvalidation/dist/js/framework/bootstrap.js"></script>
    <script src="~/Areas/Base/Scripts/formvalidation/dist/js/language/zh_CN.js"></script>
    <script src="~/Areas/Base/Scripts/customer/plugin.extend.js"></script>
    <script src="~/Areas/Base/Scripts/customer/common.js"></script>
    <script src="~/Areas/Adm/Scripts/common.js"></script>
    <script>
        //初始化
        $(function () {
            Metronic.init();
            Layout.init();
            Login.init();
            admPage({ title: "登录" });

            //站点信息
            $("#logoBox, #copyrightBox").replaceFormat(appInfo.site);
        });

        //键盘登录
        function enterSubmit() {
            var event = arguments.callee.caller.arguments[0] || window.event;//消除浏览器差异
            if (event.keyCode == 13) {
                login();
            }
        }

        //登录
        function login() {
            var user = $("input[name='login.username']").val();
            var password = $("input[name='login.password']").val();
            var loginModel = {
                Name: user,
                Password: password,
                LoginMethod: 2,
                CompanyId: appInfo.site.Id
            }
            $.ajax({
                async: true,
                type: "POST",
                dataType: "json",
                data: loginModel,
                url: getUrl("User", "Login"),
                success: function (data) {
                    if (data.Type == "Error") {
                        $("#login-form-error").html(data.Content);
                        return false;
                    }
                    var returnUrl = $getQueryString("returnUrl");
                    if (returnUrl) {
                        window.location.href = returnUrl;
                    } else {
                        window.location.href = getUrl("Site", "Edit");
                    }
                },
                error: function (e) {
                }
            });
            return false;
        }
    </script>
</body>
</html>
